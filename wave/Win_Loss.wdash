{"dataSourceLinks":[],"filters":[],"gridLayouts":[{"name":"Default","numColumns":22,"pages":[{"label":"Untitled","name":"6abc06e2-edac-427c-820a-a0b59d274b97","navigationHidden":false,"widgets":[{"colspan":4,"column":0,"name":"listselector_1","row":0,"rowspan":1,"widgetStyle":{"backgroundColor":"#E2F2F1","borderColor":"#F2F6FA","borderEdges":[],"borderRadius":4,"borderWidth":1}},{"colspan":5,"column":4,"name":"dateselector_1","row":0,"rowspan":1,"widgetStyle":{"backgroundColor":"#E2F2F1","borderColor":"#F2F6FA","borderEdges":[],"borderRadius":4,"borderWidth":1}},{"colspan":4,"column":9,"name":"listselector_2","row":0,"rowspan":1,"widgetStyle":{"backgroundColor":"#E2F2F1","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":4,"borderWidth":1}},{"colspan":4,"column":13,"name":"listselector_3","row":0,"rowspan":1,"widgetStyle":{"backgroundColor":"#E2F2F1","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":4,"borderWidth":1}},{"colspan":5,"column":17,"name":"listselector_4","row":0,"rowspan":1,"widgetStyle":{"backgroundColor":"#E2F2F1","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":22,"column":0,"name":"container_1","row":0,"rowspan":2,"widgetStyle":{"backgroundColor":"#F2F6FA","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":6,"column":10,"name":"pillbox_2","row":1,"rowspan":1,"widgetStyle":{"backgroundColor":"#EEF9F9","borderEdges":[],"borderRadius":8}},{"colspan":9,"column":13,"name":"chart_1","row":2,"rowspan":5,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":3,"column":0,"name":"number_1","row":2,"rowspan":2,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":3,"column":0,"name":"number_2","row":4,"rowspan":2,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":5,"column":2,"name":"link_1","row":18,"rowspan":1,"widgetStyle":{"backgroundColor":"#BEDFDD","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":5,"column":10,"name":"link_3","row":18,"rowspan":1,"widgetStyle":{"backgroundColor":"rgb(194, 240, 237)","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":5,"column":17,"name":"link_2","row":18,"rowspan":1,"widgetStyle":{"backgroundColor":"#E2DCF2","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":22,"column":0,"name":"container_6","row":18,"rowspan":1,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":4,"column":11,"name":"pillbox_1","row":7,"rowspan":1,"widgetStyle":{"backgroundColor":"#E2F2F1","borderEdges":[],"borderRadius":8}},{"colspan":19,"column":3,"name":"container_2","row":7,"rowspan":6,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":3,"column":0,"name":"number_3","row":6,"rowspan":2,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":3,"column":0,"name":"number_4","row":8,"rowspan":2,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":9,"column":3,"name":"chart_4","row":8,"rowspan":5,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":10,"column":12,"name":"chart_2","row":8,"rowspan":5,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":0,"borderWidth":1}},{"colspan":3,"column":0,"name":"number_5","row":10,"rowspan":2,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":3,"column":0,"name":"number_7","row":12,"rowspan":2,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":10,"column":3,"name":"chart_6","row":2,"rowspan":5,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}},{"colspan":19,"column":3,"name":"chart_3","row":13,"rowspan":5,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#091A3E","borderEdges":["all"],"borderRadius":4,"borderWidth":1}}]}],"rowHeight":"normal","selectors":[],"style":{"alignmentX":"left","alignmentY":"top","backgroundColor":"#F0EDF9","cellSpacingX":4,"cellSpacingY":4,"fit":"original","gutterColor":"#C5D3E0"},"version":1.0}],"layouts":[],"steps":{"Top_Widgtes_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"Top Widgtes","query":{"query":"{\"measures\":[[\"unique\",\"AccountID\",\"A\"],[\"unique\",\"AccountID\",\"B\"],[\"unique\",\"AccountID\",\"C\"],[\"sum\",\"ProdMembers\",\"D\"],[\"sum\",\"ProdMembers\",\"E\"],[\"sum\",\"ProdMembers\",\"F\"]],\"columns\":[{\"query\":{\"measures\":[[\"unique\",\"AccountID\"]],\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType\\\").asObject()}}\",\"in\"],[\"OppStage\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppStage_1\\\").asObject()}}\",\"in\"]]},\"header\":\"Total Account Wins\"},{\"query\":{\"measures\":[[\"unique\",\"AccountID\"]],\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType\\\").asObject()}}\",\"in\"],[\"OppStage\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppStage_2\\\").asObject()}}\",\"in\"]]},\"header\":\"Total Account Losses\"},{\"query\":{\"measures\":[[\"unique\",\"AccountID\"]],\"formula\":\"round(A/(A+B),3)\",\"filters\":[[\"OppRecordType\",[\"New Business\"],\"in\"],[\"OppStage\",[\"Closed Lost\",\"Closed Dead\"],\"in\"],[\"ProdStage\",[\"XXX\"],\"not in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Account Close Ratio\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType\\\").asObject()}}\",\"in\"],[\"OppStage\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppStage_1\\\").asObject()}}\",\"in\"],\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_ProdStage_3\\\").asObject()}}\"]},\"header\":\"Total Member Wins\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType\\\").asObject()}}\",\"in\"],[\"OppStage\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppStage_2\\\").asObject()}}\",\"in\"],\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_ProdStage_5\\\").asObject()}}\"]},\"header\":\"Total Memeber Losses\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"formula\":\"round(D/(D-E),3)\",\"filters\":[[\"OppRecordType\",[\"New Business\"],\"in\"],[\"OppStage\",[\"Closed Lost\",\"Closed Dead\"],\"in\"],[\"ProdStage\",[\"IGAP Dead\",\"IGAP Lost\",\"Dead\",\"Jeopardy\",\"Lost\",\"Termed\"],\"in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Members Close Ratio\"}]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"columnProperties":{},"columns":[],"customBulkActions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","totals":true},"type":"table"}},"Top_Widgtes_2":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"Top Widgtes","query":{"query":"{\"measures\":[[\"unique\",\"AccountID\",\"A\"],[\"unique\",\"AccountID\",\"B\"],[\"unique\",\"AccountID\",\"C\"],[\"sum\",\"ProdMembers\",\"D\"],[\"sum\",\"ProdMembers\",\"E\"],[\"sum\",\"ProdMembers\",\"F\"]],\"columns\":[{\"query\":{\"measures\":[[\"unique\",\"AccountID\"]],\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType\\\").asObject()}}\",\"in\"],\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_ProdStage_3\\\").asObject()}}\"]},\"header\":\"Total Account Wins\"},{\"query\":{\"measures\":[[\"unique\",\"AccountID\"]],\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType\\\").asObject()}}\",\"in\"],\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_ProdStage_4\\\").asObject()}}\"]},\"header\":\"Total Account Losses\"},{\"query\":{\"measures\":[[\"unique\",\"AccountID\"]],\"formula\":\"round(A/(A+B),3)\",\"filters\":[[\"OppRecordType\",[\"New Business\"],\"in\"],[\"OppStage\",[\"Closed Lost\",\"Closed Dead\"],\"in\"],[\"ProdStage\",[\"XXX\"],\"not in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Account Close Ratio\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType\\\").asObject()}}\",\"in\"],[\"OppStage\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppStage_1\\\").asObject()}}\",\"in\"],\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_ProdStage_3\\\").asObject()}}\"]},\"header\":\"Total Member Wins\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType\\\").asObject()}}\",\"in\"],[\"OppStage\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppStage_2\\\").asObject()}}\",\"in\"],\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_ProdStage_5\\\").asObject()}}\"]},\"header\":\"Total Memeber Losses\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"formula\":\"round(D/(D-E),3)\",\"filters\":[[\"OppRecordType\",[\"New Business\"],\"in\"],[\"OppStage\",[\"Closed Lost\",\"Closed Dead\"],\"in\"],[\"ProdStage\",[\"IGAP Dead\",\"IGAP Lost\",\"Dead\",\"Jeopardy\",\"Lost\",\"Termed\"],\"in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Members Close Ratio\"}]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"columnProperties":{},"columns":[],"customBulkActions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","totals":true},"type":"table"}},"Top_10_win_loss_by_b_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"Top 10 win loss by brokerage","query":{"query":"{\"measures\":[[\"sum\",\"ProdMembers\",\"A\"]],\"columns\":[{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"groups\":[\"ConsultantFirm\"],\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType\\\").asObject()}}\",\"in\"],[\"OppStage\",\"({{column(WinLoss_MidStepFilter_1.result,[\\\"WinLossFilter\\\"]).asObject()}})\",\"in\"],\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_ProdStage_4\\\").asObject()}}\"],\"order\":[[\"A\",{\"ascending\":false}]]},\"header\":\"Win\"}],\"groups\":[\"ConsultantFirm\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"columnProperties":{},"columns":[],"customBulkActions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","totals":true},"type":"table"}},"Win_Loss_Close_Ratio_1":{"broadcastFacet":true,"groups":[],"label":"Win Loss Close Ratio New","numbers":[],"query":"q = load \"National_DataSet\";\nq_A = filter q by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppRecordType1\").asEquality(\"OppRecordType\")}} && !('AccountName' in [\"UAW Retiree Medical Benefit Trust (Chrysler Retirees)\", \"UAW Retiree Medical Benefit Trust (Ford retirees)\", \"UAW Retiree Medical Benefit Trust (GM retirees)\",\"BWXT Investment Company\", \"First America, Inc.\", \"Southern California Edison\", \"Suominen\", \"WEC Energy Group\"])  && {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppStage_1\").asEquality(\"OppStage\")}} && {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_ProdStage_6\").asEquality(\"ProdStage\")}}; \nq_B = filter q by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppRecordType1\").asEquality(\"OppRecordType\")}} && !('AccountName' in [\"UAW Retiree Medical Benefit Trust (Chrysler Retirees)\", \"UAW Retiree Medical Benefit Trust (Ford retirees)\", \"UAW Retiree Medical Benefit Trust (GM retirees)\",\"BWXT Investment Company\", \"First America, Inc.\", \"Southern California Edison\", \"Suominen\", \"WEC Energy Group\"]) && {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppStage_2\").asEquality(\"OppStage\")}} && {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_ProdStage_7\").asEquality(\"ProdStage\")}};\nresult = group q_A by 'AccountRegion' full, q_B by 'AccountRegion';\nresult = foreach result generate coalesce(q_A.'AccountRegion', q_B.'AccountRegion') as 'AccountRegion', coalesce(unique(q_A.'OppId'),0) as 'Win', coalesce(unique(q_B.'OppId'),0) as 'Loss';\nresult = foreach result generate 'AccountRegion', round(Win/(Win+Loss),3)*100 as 'Close Ratio','Win', 'Loss';\nresult = order result by ('AccountRegion' asc);\nresult = limit result 2000;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","start":"[]","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showValues":true,"showPoints":true,"legend":{"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"showBinLabel":true,"measures":"","showPercentage":true,"showDimensions":true,"showMeasures":true,"customizeTooltip":false,"dimensions":""},"visualizationType":"combo","missingValue":"connect","title":{"fontSize":14,"subtitleFontSize":11,"label":"Close/Retention Ratio","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"measureAxis2":{"sqrtScale":false,"showTitle":false,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":false,"showAxis":true,"referenceLines":[{"color":"#091A3E","value":{"data":0,"type":"static"}}],"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"StaticToggle_NBEB_1":{"broadcastFacet":false,"columns":{},"isGlobal":false,"label":"StaticToggle_NBEB","selectMode":"single","start":"{\"display\":[\"New Business\"]}","type":"staticflex","useGlobal":false,"values":["{\"display\":\"New Business\",\"groups\":[\"ProdReason\"],\"Filter_OppRecordType\":\"New Business\",\"Filter_OppRecordType1\":\"New Business\",\"Filter_OppStage_1\":\"Closed Won\",\"Filter_OppStage_2\":[\"Closed Lost\"],\"Filter_ProdStage_3\":[\"ProdStage\",[\"Sold\"],\"in\"],\"Filter_ProdStage_4\":[\"ProdStage\",[\"Lost\",\"Dead\"],\"in\"],\"Filter_ProdStage_5\":[\"ProdStage\",[\"Lost\"],\"in\"],\"Filter_ProdStage_6\":\"Sold\",\"Filter_ProdStage_7\":[\"Lost\",\"Dead\"],\"header\":\"Win\",\"header1\":\"Total Account Wins\",\"header2\":\"Total Account Losses\",\"header3\":\"Account Close Ratio\",\"header4\":\"Total Member Wins\",\"header5\":\"Total Member Losses\",\"header6\":\"Member Close Ratio\"}","{\"display\":\"Existing Business\",\"groups\":[\"ProdReason\"],\"Filter_OppRecordType\":\"Renewal\",\"Filter_OppRecordType1\":[\"Renewal\",\"In Group Change\",\"In Group Add Product\"],\"Filter_OppStage_1\":[\"Change Confirmed\",\"Renewal Finalized\"],\"Filter_OppStage_2\":[\"Change Confirmed\",\"Renewal Finalized\",\"Customer Termed\"],\"Filter_ProdStage_1\":\"Sold\",\"Filter_ProdStage_2\":[\"Lost\",\"Termed\"],\"Filter_ProdStage_3\":[\"ProdStage\",[\"Renewed\"],\"in\"],\"Filter_ProdStage_4\":[\"ProdStage\",[\"Termed\"],\"in\"],\"Filter_ProdStage_5\":[\"ProdStage\",[\"Lost\",\"Termed\"],\"in\"],\"Filter_ProdStage_6\":\"Renewed\",\"Filter_ProdStage_7\":\"Termed\",\"header1\":\"Total Account Growth\",\"header2\":\"Total Account Loss\",\"header3\":\"Account Retention Ratio\",\"header4\":\"Total New Member Wins\",\"header5\":\"Total Member Loss\",\"header6\":\"Member Retention Ratio\",\"header\":\"Renewed\"}"]},"StaticToggle_NBEB_2":{"broadcastFacet":false,"columns":{},"isGlobal":false,"label":"StaticToggle_NBEB","selectMode":"single","start":"{\"display\":[\"Win\"]}","type":"staticflex","useGlobal":false,"values":["{\"display\":\"Win\",\"Filter_WinLoss\":\"Win\",\"label\":\"Top 10 Win by Competitor\",\"label_2\":\"Top 10 Win by Brokerage\"}","{\"display\":\"Loss\",\"Filter_WinLoss\":\"Loss\",\"label\":\"Top 10 Loss by Competitor\",\"label_2\":\"Top 10 Loss by Brokerage\"}"]},"Winloss_Member_Widge_1":{"broadcastFacet":true,"groups":[],"label":"Winloss_Member_Widget","numbers":[],"query":"q = load \"National_DataSet\";\nq_A = filter q by 'OppRecordType' == \"New Business\" && 'OppStage' == \"Closed Won\" && 'ProdStage' == \"Sold\";\nq_B = filter q by 'OppRecordType' == \"New Business\" && 'OppStage' == \"Closed Lost\" && 'ProdStage' in [\"Lost\", \"Dead\"];\nresult_AB = group q_A by all full, q_B by all ;\nresult_AB = foreach result_AB generate coalesce(sum(q_A.'ProdMembers'),0) as 'A', coalesce(sum(q_B.'ProdMembers'),0) as 'B';\nresult_AB = foreach result_AB generate \"New Business\" as 'Toggle','A' as 'Total Win', abs(B) as 'Total Loss', (A/(A+abs(B))) as 'Win Ratio';\nq_D = filter q by 'OppRecordType' == \"Renewal\" && 'OppStage' == \"Renewal Finalized\" && 'ProdStage' == \"IGAP Sold\";\nq_E = filter q by 'OppRecordType' in [\"In Group Add Product\", \"In Group Change\"] && 'OppStage' == \"Change Confirmed\" && 'ProdStage' == \"Sold\" && 'AddorLoseLives' == \"Add Lives\";\nq_F = filter q by 'OppRecordType' == \"Renewal\" && 'OppStage' == \"Customer Termed\" && 'ProdStage' == \"Termed\";\nq_G = filter q by 'OppRecordType' in [\"In Group Add Product\", \"In Group Change\"] && 'OppStage' == \"Change Confirmed\" && 'ProdStage' == \"Lost\" && 'AddorLoseLives' == \"Lose Lives\";\nresult_DEFG = group q_D by all full, q_E by all full, q_F by all full, q_G by all;\nresult_DEFG = foreach result_DEFG generate coalesce(sum(q_D.'ProdMembers'),0) as 'D', coalesce(sum(q_E.'ProdMembers'),0) as 'E', coalesce(sum(q_F.'ProdMembers'),0) as 'F', coalesce(sum(q_G.'ProdMembers'),0) as 'G';\nresult_DEFG = foreach result_DEFG generate  \"Renewal\" as 'Toggle', D+E as 'Total Win', abs(F)+abs(G) as 'Total Loss', ((D+E)/(D+E+abs(F)+abs(G))) as 'Win Ratio';\nresult_x = union result_AB,result_DEFG;\nresult_x = filter result_x by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppRecordType\").asEquality(\"Toggle\")}};","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"verticalPadding":8},"type":"table"}},"New_Close_Ratio_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"New Close Ratio","query":{"query":"{\"measures\":[[\"unique\",\"OppId\",\"C\"],[\"unique\",\"OppId\",\"A\"],[\"unique\",\"OppId\",\"B\"]],\"columns\":[{\"query\":{\"measures\":[[\"unique\",\"OppId\"]],\"groups\":[\"AccountRegion\"],\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType1\\\").asObject()}}\",\"in\"],[\"OppStage\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppStage_1\\\").asObject()}}\",\"in\"],\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_ProdStage_3\\\").asObject()}}\"]},\"header\":\"Win\"},{\"query\":{\"measures\":[[\"unique\",\"OppId\"]],\"groups\":[\"AccountRegion\"],\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType1\\\").asObject()}}\",\"in\"],[\"OppStage\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppStage_2\\\").asObject()}}\",\"in\"],\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_ProdStage_4\\\").asObject()}}\"]},\"header\":\"Loss\"},{\"query\":{\"measures\":[[\"unique\",\"OppId\"]],\"formula\":\"round(A/(A+B),3)\",\"groups\":[\"AccountRegion\"],\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType1\\\").asObject()}}\",\"in\"],[\"OppStage\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppStage_2\\\").asObject()}}\",\"in\"],\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_ProdStage_4\\\").asObject()}}\"]},\"header\":\"Close Ratio\"}],\"groups\":[\"AccountRegion\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"columnProperties":{},"columns":[],"customBulkActions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","totals":true},"type":"table"}},"Reason_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"Reason","query":{"query":"{\"measures\":[[\"count\",\"*\"]],\"groups\":[\"ProdReason\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","start":"[]","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"none","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","visualizationType":"hbar","title":{"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"enable":false,"type":"x","chartsPerLine":4},"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"Consulting_firm_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"Consulting firm","query":{"query":"{\"measures\":[[\"count\",\"*\"]],\"groups\":[\"ConsultantFirm\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","start":"[]","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"none","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","visualizationType":"hbar","title":{"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"enable":false,"type":"x","chartsPerLine":4},"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"Competitor_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"Competitor","query":{"query":"{\"measures\":[[\"count\",\"*\"]],\"groups\":[\"CompetitorName\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","start":"[]","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"none","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","visualizationType":"hbar","title":{"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"enable":false,"type":"x","chartsPerLine":4},"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"Top_10_Wins_by_broke_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"Top 10 Wins by brokerage","query":{"query":"{\"measures\":[[\"sum\",\"ProdMembers\",\"A\"]],\"columns\":[{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"groups\":[\"ConsultantFirm\"],\"filters\":[[\"OppRecordType\",[\"New Business\"],\"in\"],[\"ProdStage\",[\"XXX\"],\"not in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]],\"order\":[[\"A\",{\"ascending\":false}]]},\"header\":\"Win\"}],\"groups\":[\"ConsultantFirm\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"sync","visualizationType":"hbar","title":{"label":"Top 10 Win/Loss by Consultant","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"enable":false,"type":"x","chartsPerLine":4},"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":false,"showAxis":false,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"Lost_reasons_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"Lost reasons","query":{"query":"{\"measures\":[[\"unique\",\"OppId\"]],\"groups\":\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"groups\\\").asObject()}}\",\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType1\\\").asObject()}}\",\"in\"],\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_ProdStage_5\\\").asObject()}}\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","start":"[]","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"parameters":{"centerText":"","centerValueType":"number","legend":{"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"showMeasureTitle":true,"valueType":"compactNumber","visualizationType":"pie","theme":"wave","title":{"label":"","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"enable":false,"type":"x","chartsPerLine":4},"inner":60},"type":"chart"}},"all_1":{"broadcastFacet":false,"datasets":[{"name":"National_DataSet"}],"isGlobal":true,"query":{"query":"{\"measures\":[[\"count\",\"*\"]],\"filters\":[[\"ProdLOB\",[\"Medical\"],\"in\"]]}","version":-1.0},"receiveFacetSource":{"mode":"none","steps":[]},"selectMode":"single","type":"aggregateflex","useGlobal":false,"visualizationParameters":{"parameters":{"autoFitMode":"none","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","visualizationType":"hbar","title":{"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"enable":false,"type":"x","chartsPerLine":4},"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"New_Renewal_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"New/Renewal","query":{"query":"{\"measures\":[[\"count\",\"*\"]],\"groups\":[\"OppRecordType\"],\"filters\":[[\"OppRecordType\",[\"New Business\",\"Renewal\"],\"in\"]]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"none","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","visualizationType":"hbar","title":{"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"enable":false,"type":"x","chartsPerLine":4},"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"WinLoss_MidStepFilter_1":{"broadcastFacet":true,"groups":[],"label":"WinLoss_MidStepFilter","numbers":[],"query":"q_A = load \"National_DataSet\";\nq_A = group q_A by 'all';\nq_A = foreach q_A generate \"New Business\" as 'RecordType', \"Win\" as 'WinLoss', \"Closed Won\" as 'WinLossFilter', \"XYZ\" as 'WLProdStage';\nq_C = load \"National_DataSet\";\nq_C = group q_C by 'all';\nq_C = foreach q_C generate \"New Business\" as 'RecordType', \"Loss\" as 'WinLoss', \"Closed Lost\" as 'WinLossFilter', \"XYZ\" as 'WLProdStage';\nq_B = load \"National_DataSet\";\nq_B = group q_B by 'all';\nq_B = foreach q_B generate \"Renewal\" as 'RecordType', \"Win\" as 'WinLoss',\"Change Confirmed\" as 'WinLossFilter', \"Sold\" as 'WLProdStage';\nq_B1 = load \"National_DataSet\";\nq_B1 = group q_B1 by 'all';\nq_B1 = foreach q_B1 generate \"Renewal\" as 'RecordType', \"Win\" as 'WinLoss', \"Renewal Finalized\" as 'WinLossFilter', \"Sold\" as 'WLProdStage';\nq_D = load \"National_DataSet\";\nq_D = group q_D by 'all';\nq_D = foreach q_D generate \"Renewal\" as 'RecordType', \"Loss\" as 'WinLoss', \"[Change Confirmed,Renewal Finalized,Customer Termed]\" as 'WinLossFilter', \"[Lost,Termed]\" as 'WLProdStage';\nresult = union q_A, q_C, q_B,q_B1, q_D;\nFinal = filter result by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppRecordType\").asEquality(\"RecordType\")}};\nFinal = filter Final by {{column(StaticToggle_NBEB_2.selection,[\"Filter_WinLoss\"]).asEquality(\"WinLoss\")}};","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"columnProperties":{},"columns":[],"customBulkActions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable"},"type":"table"}},"Top_10_existing_brok_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"Top 10 existing brokerage","query":{"query":"{\"measures\":[[\"sum\",\"ProdMembers\",\"A\"],[\"sum\",\"ProdMembers\",\"B\"]],\"columns\":[{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"limit\":[\"10\"],\"groups\":[\"ConsultantFirm\"],\"filters\":[[\"OppRecordType\",[\"Renewal\"],\"in\"],[\"OppStage\",[\"Change Confirmed\",\"Renewal Finalized\"],\"in\"],[\"ProdStage\",[\"Sold\"],\"in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Win\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"limit\":[\"10\"],\"groups\":[\"ConsultantFirm\"],\"filters\":[[\"OppRecordType\",[\"Renewal\"],\"in\"],[\"OppStage\",[\"Change Confirmed\",\"Customer Termed\",\"Renewal Finalized\"],\"in\"],[\"ProdStage\",[\"Lost\",\"Termed\"],\"in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]],\"order\":[[-1,{\"ascending\":false,\"inner\":false}]]},\"header\":\"Loss\"}],\"groups\":[\"ConsultantFirm\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"dual","visualizationType":"hbar","title":{"label":"Existing Business Retention Rate","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"enable":false,"type":"x","chartsPerLine":4},"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"Top10_Brokerage_1":{"broadcastFacet":true,"groups":[],"label":"Top10_Brokerage","numbers":[],"query":"q = load \"National_DataSet\";\nq_A = filter q by ('OppRecordType' == \"New Business\") && ('OppStage' == \"Closed Won\" && 'ProdStage' == \"Sold\");\nresult_A = group q_A by 'ConsultantFirm';\nresult_A = foreach result_A generate \"New Business\" as 'RecordType', \"Win\" as 'WinLoss', \"Top 10 Wins by Brokerage\" as 'Header', q_A.'ConsultantFirm' as 'ConsultantFirm', sum(q_A.'ProdMembers') as 'A';\nresult_A = filter result_A by 'A' > 0;\nresult_A = order result_A by 'A' desc;\nq_B = filter q by ('OppRecordType' == \"New Business\") && 'OppStage' == \"Closed Lost\" && 'ProdStage' in [\"Lost\", \"Dead\"];\nresult_B = group q_B by 'ConsultantFirm';\nresult_B = foreach result_B generate \"New Business\" as 'RecordType', \"Loss\" as 'WinLoss', \"Top 10 Losses by Brokerage\" as 'Header', q_B.'ConsultantFirm' as 'ConsultantFirm', sum(q_B.'ProdMembers') as 'A';\nresult_B = filter result_B by 'A' < 0;\nresult_B = order result_B by 'A' asc;\nq_C = filter q by (('OppRecordType' in [\"Renewal\", \"In Group Change\", \"In Group Add Product\"]) && ('OppStage' in [\"Change Confirmed\", \"Renewal Finalized\"])) && ('ProdStage' in [\"Sold\"]);\nresult_C = group q_C by 'ConsultantFirm';\nresult_C = foreach result_C generate \"Renewal\" as 'RecordType', \"Win\" as 'WinLoss', \"Top 10 Growth by Brokerage\" as 'Header', q_C.'ConsultantFirm' as 'ConsultantFirm', sum(q_C.'ProdMembers') as 'A';\nresult_C = filter result_C by 'A' > 0;\nresult_C = order result_C by 'A' desc;\nq_D = filter q by (('OppRecordType' in [\"Renewal\", \"In Group Change\", \"In Group Add Product\"]) && ('OppStage' in [\"Change Confirmed\", \"Renewal Finalized\", \"Customer Termed\"]));\nresult_D = group q_D by 'ConsultantFirm';\nresult_D = foreach result_D generate \"Renewal\" as 'RecordType', \"Loss\" as 'WinLoss', \"Top 10 Losses by Brokerage\" as 'Header', q_D.'ConsultantFirm' as 'ConsultantFirm', sum(q_D.'ProdMembers') as 'A';\nresult_D = filter result_D by 'A' < 0;\nresult_D = order result_D by 'A' asc;\nFinal = union result_A, result_B, result_C, result_D;\nFinal_1 = filter Final by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppRecordType\").asEquality(\"RecordType\")}};\nFinal_2 = filter Final_1 by {{column(StaticToggle_NBEB_2.selection,[\"Filter_WinLoss\"]).asEquality(\"WinLoss\")}};\nFinal_2 = limit Final_2 10;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","start":"[]","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"showHeader":true,"show":false,"customSize":"auto","position":"right-top","inside":false},"axisMode":"sync","visualizationType":"hbar","title":{"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"enable":false,"type":"x","chartsPerLine":4},"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":false,"showAxis":false,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"Existing_Win_Loss_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"Existing Win Loss","query":{"query":"{\"measures\":[[\"unique\",\"OppId\",\"A\"],[\"unique\",\"OppId\",\"B\"]],\"columns\":[{\"query\":{\"measures\":[[\"unique\",\"OppId\"]],\"groups\":[\"AccountRegion\"],\"filters\":[[\"OppRecordType\",[\"Renewal\"],\"in\"],[\"OppStage\",[\"Change Confirmed\",\"Renewal Finalized\"],\"in\"],[\"ProdStage\",[\"Sold\"],\"in\"]]},\"header\":\"Win\"},{\"query\":{\"measures\":[[\"unique\",\"OppId\"]],\"groups\":[\"AccountRegion\"],\"filters\":[[\"OppRecordType\",[\"Renewal\"],\"in\"],[\"OppStage\",[\"Change Confirmed\",\"Customer Termed\",\"Renewal Finalized\"],\"in\"],[\"ProdStage\",[\"Lost\",\"Termed\"],\"in\"]]},\"header\":\"Loss\"}],\"groups\":[\"AccountRegion\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"columnProperties":{},"columns":[],"customBulkActions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","totals":true},"type":"table"}},"Winloss_Account_Widg_1":{"broadcastFacet":true,"groups":[],"label":"Winloss_Account_Widget","numbers":[],"query":"q = load \"National_DataSet\";\nq_A = filter q by 'OppRecordType' == \"New Business\" && 'OppStage' == \"Closed Won\";\nq_B = filter q by 'OppRecordType' == \"New Business\" && 'OppStage' == \"Closed Lost\";\nresult_AB = group q_A by all full, q_B by all ;\nresult_AB = foreach result_AB generate coalesce(unique(q_A.'AccountID'),0) as 'A', coalesce(unique(q_B.'AccountID'),0) as 'B';\nresult_AB = foreach result_AB generate \"New Business\" as 'Toggle','A' as 'Win', 'B'as 'Loss', (A/(A+B)) as 'Win Ratio';\nq_D = filter q by 'OppRecordType' == \"Renewal\" && 'OppStage' == \"Renewal Finalized\" && 'ProdStage' == \"IGAP Sold\";\nq_E = filter q by 'OppRecordType' in [\"In Group Add Product\", \"In Group Change\"] && 'OppStage' == \"Change Confirmed\" && 'ProdStage' == \"Sold\" && 'AddorLoseLives' == \"Add Lives\";\nq_F = filter q by 'OppRecordType' == \"Renewal\" && 'OppStage' == \"Customer Termed\" && 'ProdStage' == \"Termed\";\nq_G = filter q by 'OppRecordType' in [\"In Group Add Product\", \"In Group Change\"] && 'OppStage' == \"Change Confirmed\" && 'ProdStage' == \"Lost\" && 'AddorLoseLives' == \"Lose Lives\";\nresult_DEFG = group q_D by all full, q_E by all full, q_F by all full, q_G by all;\nresult_DEFG = foreach result_DEFG generate coalesce(unique(q_D.'AccountID'),0) as 'D', coalesce(unique(q_E.'AccountID'),0) as 'E', coalesce(unique(q_F.'AccountID'),0) as 'F', coalesce(unique(q_G.'AccountID'),0) as 'G';\nresult_DEFG = foreach result_DEFG generate  \"Renewal\" as 'Toggle', D+E as 'Win', F+G as 'Loss', ((D+E)/(D+E+F+G)) as 'Win Ratio';\nresult_x = union result_AB,result_DEFG;\nresult_x = filter result_x by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppRecordType\").asEquality(\"Toggle\")}};","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"verticalPadding":8},"type":"table"}},"AccountRegion_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"query":{"query":"{\"measures\":[[\"count\",\"*\"]],\"groups\":[\"AccountRegion\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","start":"[]","type":"aggregateflex","useGlobal":false,"visualizationParameters":{}},"WinLoss_Summary_Upda_1":{"broadcastFacet":true,"groups":[],"label":"WinLoss_Summary_Updated","numbers":[],"query":"q = load \"National_DataSet\";\nq_A = filter q by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppRecordType1\").asEquality(\"OppRecordType\")}};\nq_A = filter q by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppStage_1\").asEquality(\"OppStage\")}}; \nq_A = filter q by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_ProdStage_6\").asEquality(\"ProdStage\")}} ;\nq_B = filter q by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppRecordType1\").asEquality(\"OppRecordType\")}};\nq_B = filter q by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppStage_2\").asEquality(\"OppStage\")}};\nq_B = filter q by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_ProdStage_7\").asEquality(\"ProdStage\")}}; \nresult = group q_A by 'AccountRegion' full, q_B by 'AccountRegion';\nresult = foreach result generate coalesce(q_A.'AccountRegion', q_B.'AccountRegion') as 'AccountRegion', sum(q_A.'ProdMembers') as {{column(StaticToggle_NBEB_1.selection,[\"header\"]).asObject()}}, sum(q_B.'ProdMembers') as 'Loss';\nresult = order result by ('AccountRegion' asc);","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"showHeader":false,"show":true,"customSize":"auto","position":"bottom-center","inside":false},"axisMode":"sync","tooltip":{"showBinLabel":true,"measures":"","showPercentage":true,"showDimensions":true,"showMeasures":true,"customizeTooltip":false,"dimensions":""},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"Win Loss Summary","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":false,"showAxis":false,"referenceLines":[{"color":"#091A3E","value":{"data":0,"type":"static"}}],"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"OppEffectiveDate_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"query":{"query":"{\"measures\":[[\"count\",\"*\"]],\"groups\":[\"OppEffectiveDate\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","start":"[[[\"year\",1],[\"year\",1]]]","type":"aggregateflex","useGlobal":false,"visualizationParameters":{}},"Existing_Retention_R_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"Existing Retention Rate","query":{"query":"{\"measures\":[[\"unique\",\"OppId\",\"C\"],[\"unique\",\"OppId\",\"A\"],[\"unique\",\"OppId\",\"B\"]],\"columns\":[{\"query\":{\"measures\":[[\"unique\",\"OppId\"]],\"groups\":[\"AccountRegion\"],\"filters\":[[\"OppRecordType\",[\"Renewal\"],\"in\"],[\"OppStage\",[\"Change Confirmed\",\"Renewal Finalized\"],\"in\"],[\"ProdStage\",[\"Sold\"],\"in\"]]},\"header\":\"Win\"},{\"query\":{\"measures\":[[\"unique\",\"OppId\"]],\"groups\":[\"AccountRegion\"],\"filters\":[[\"OppRecordType\",[\"Renewal\"],\"in\"],[\"OppStage\",[\"Change Confirmed\",\"Customer Termed\",\"Renewal Finalized\"],\"in\"],[\"ProdStage\",[\"Lost\",\"Termed\"],\"in\"]]},\"header\":\"Loss\"},{\"query\":{\"measures\":[[\"unique\",\"OppId\"]],\"groups\":[\"AccountRegion\"],\"formula\":\"A/(A+B)\",\"filters\":[[\"OppRecordType\",[\"Renewal\"],\"in\"],[\"OppStage\",[\"Change Confirmed\",\"Customer Termed\",\"Renewal Finalized\"],\"in\"],[\"ProdStage\",[\"Lost\",\"Termed\"],\"in\"]]},\"header\":\"Retention Rate\"}],\"groups\":[\"AccountRegion\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"columnProperties":{},"columns":[],"customBulkActions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","totals":true},"type":"table"}},"Top_10_existing_Comp_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"Top 10 existing Competitor","query":{"query":"{\"measures\":[[\"sum\",\"ProdMembers\",\"A\"],[\"sum\",\"ProdMembers\",\"B\"]],\"columns\":[{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"limit\":[\"10\"],\"groups\":[\"CompetitorName\"],\"filters\":[[\"OppRecordType\",[\"Renewal\"],\"in\"],[\"OppStage\",[\"Change Confirmed\",\"Renewal Finalized\"],\"in\"],[\"ProdStage\",[\"Sold\"],\"in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Win\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"limit\":[\"10\"],\"groups\":[\"CompetitorName\"],\"filters\":[[\"OppRecordType\",[\"Renewal\"],\"in\"],[\"OppStage\",[\"Change Confirmed\",\"Customer Termed\",\"Renewal Finalized\"],\"in\"],[\"ProdStage\",[\"Lost\",\"Termed\"],\"in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]],\"order\":[[-1,{\"ascending\":false,\"inner\":false}]]},\"header\":\"Loss\"}],\"groups\":[\"CompetitorName\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"dual","visualizationType":"hbar","title":{"label":"Existing Business Retention Rate","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"enable":false,"type":"x","chartsPerLine":4},"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"NB_Close_Ratio_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"NB Close Ratio","query":{"query":"{\"measures\":[[\"unique\",\"AccountID\",\"A\"],[\"unique\",\"AccountID\",\"B\"],[\"unique\",\"AccountID\",\"C\"],[\"sum\",\"ProdMembers\",\"D\"],[\"sum\",\"ProdMembers\",\"E\"],[\"sum\",\"ProdMembers\",\"F\"]],\"columns\":[{\"query\":{\"measures\":[[\"unique\",\"AccountID\"]],\"filters\":[[\"ProdStage\",[\"Sold\"],\"in\"],[\"ProdLOB\",[\"Medical\"],\"in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Total Account Wins\"},{\"query\":{\"measures\":[[\"unique\",\"AccountID\"]],\"filters\":[[\"ProdStage\",[\"Lost\",\"Dead\"],\"in\"],[\"ProdLOB\",[\"Medical\"],\"in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Total Account Losses\"},{\"query\":{\"measures\":[[\"unique\",\"AccountID\"]],\"formula\":\"round(A/(A+B),3)\",\"filters\":[[\"OppRecordType\",[\"New Business\"],\"in\"],[\"OppStage\",[\"Closed Lost\",\"Closed Dead\"],\"in\"],[\"ProdStage\",[\"XXX\"],\"not in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Account Close Ratio\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"filters\":[[\"ProdStage\",[\"Sold\"],\"in\"],[\"ProdLOB\",[\"Medical\"],\"in\"]]},\"header\":\"Total Member Wins\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"filters\":[[\"OppStage\",[\"Closed Lost\",\"Closed Dead\"],\"in\"],[\"ProdStage\",[\"IGAP Dead\",\"IGAP Lost\",\"Dead\",\"Jeopardy\",\"Lost\",\"Termed\"],\"in\"],[\"ProdLOB\",[\"Medical\"],\"in\"]]},\"header\":\"Total Memeber Losses\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"formula\":\"round(D/(D+abs(E)),3)\",\"filters\":[[\"OppRecordType\",[\"New Business\"],\"in\"],[\"OppStage\",[\"Closed Lost\",\"Closed Dead\"],\"in\"],[\"ProdStage\",[\"IGAP Dead\",\"IGAP Lost\",\"Dead\",\"Jeopardy\",\"Lost\",\"Termed\"],\"in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Members Close Ratio\"}]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"totals":true,"verticalPadding":8},"type":"table"}},"New_business_Close_R_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"New business Close Ratio","query":{"query":"{\"measures\":[[\"unique\",\"AccountID\",\"A\"],[\"unique\",\"AccountID\",\"B\"],[\"unique\",\"AccountID\",\"C\"],[\"sum\",\"ProdMembers\",\"D\"],[\"sum\",\"ProdMembers\",\"E\"],[\"sum\",\"ProdMembers\",\"F\"]],\"columns\":[{\"query\":{\"measures\":[[\"unique\",\"AccountID\"]],\"filters\":[[\"ProdStage\",[\"Sold\"],\"in\"],[\"ProdLOB\",[\"Medical\"],\"in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Total Account Wins\"},{\"query\":{\"measures\":[[\"unique\",\"AccountID\"]],\"filters\":[[\"ProdStage\",[\"Lost\",\"Dead\"],\"in\"],[\"ProdLOB\",[\"Medical\"],\"in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Total Account Losses\"},{\"query\":{\"measures\":[[\"unique\",\"AccountID\"]],\"formula\":\"round(A/(A+B),3)\",\"filters\":[[\"OppRecordType\",[\"New Business\"],\"in\"],[\"OppStage\",[\"Closed Lost\",\"Closed Dead\"],\"in\"],[\"ProdStage\",[\"XXX\"],\"not in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Account Close Ratio\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"filters\":[[\"ProdStage\",[\"Sold\"],\"in\"],[\"ProdLOB\",[\"Medical\"],\"in\"]]},\"header\":\"Total Member Wins\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"filters\":[[\"OppStage\",[\"Closed Lost\",\"Closed Dead\"],\"in\"],[\"ProdStage\",[\"IGAP Dead\",\"IGAP Lost\",\"Dead\",\"Jeopardy\",\"Lost\",\"Termed\"],\"in\"],[\"ProdLOB\",[\"Medical\"],\"in\"]]},\"header\":\"Total Memeber Losses\"},{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"formula\":\"round(D/(D-E),3)\",\"filters\":[[\"OppRecordType\",[\"New Business\"],\"in\"],[\"OppStage\",[\"Closed Lost\",\"Closed Dead\"],\"in\"],[\"ProdStage\",[\"IGAP Dead\",\"IGAP Lost\",\"Dead\",\"Jeopardy\",\"Lost\",\"Termed\"],\"in\"],[\"OppEffectiveDate\",[[[\"year\",0],[\"month\",-1]]],\"in\"]]},\"header\":\"Members Close Ratio\"}]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"totals":true,"verticalPadding":8},"type":"table"}},"Top_10_Win_Loss_by_C_1":{"broadcastFacet":true,"datasets":[{"name":"National_DataSet"}],"isGlobal":false,"label":"Top 10 Wins by Competitor","query":{"query":"{\"measures\":[[\"sum\",\"ProdMembers\",\"A\"]],\"columns\":[{\"query\":{\"measures\":[[\"sum\",\"ProdMembers\"]],\"limit\":[\"10\"],\"groups\":[\"CompetitorName\"],\"filters\":[[\"OppRecordType\",\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_OppRecordType\\\").asObject()}}\",\"in\"],[\"OppStage\",\"({{cell(WinLoss_MidStepFilter_1.result,0,\\\"WinLossFilter\\\").asObject()}})\",\"in\"],\"{{cell(StaticToggle_NBEB_1.selection,0,\\\"Filter_ProdStage_3\\\").asObject()}}\"],\"order\":[[-1,{\"ascending\":false,\"inner\":false}]]},\"header\":\"Win\"}],\"groups\":[\"CompetitorName\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","type":"aggregateflex","useGlobal":true,"visualizationParameters":{"options":{},"parameters":{"columnProperties":{},"columns":[],"customBulkActions":[],"maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","totals":true},"type":"table"}},"WIN_LOSS_summary_1":{"broadcastFacet":true,"groups":[],"label":"WIN LOSS summary","numbers":[],"query":"q = load \"National_DataSet\";\nq_A = filter q by 'OppRecordType' == \"New Business\" && 'OppStage' == \"Closed Won\" && 'ProdStage' == \"Sold\";\nq_B = filter q by 'OppRecordType' == \"New Business\" && 'OppStage' == \"Closed Lost\" && 'ProdStage' in [\"Lost\", \"Dead\"];\nresult_AB = group q_A by 'AccountRegion' full, q_B by 'AccountRegion' ;\nresult_AB = foreach result_AB generate sum(q_A.'ProdMembers') as 'A',coalesce(q_A.'AccountRegion',q_B.'AccountRegion') as 'AccountRegion', sum(q_B.'ProdMembers') as 'B';\nresult_AB = foreach result_AB generate \"New Business\" as 'Toggle','AccountRegion' as 'AccountRegion','A' as {{column(StaticToggle_NBEB_1.selection,[\"header\"]).asObject()}}, 'B'as 'Loss';\nq_D = filter q by 'OppRecordType' == \"Renewal\" && 'OppStage' == \"Renewal Finalized\" && 'ProdStage' == \"IGAP Sold\";\nq_E = filter q by 'OppRecordType' in [\"In Group Add Product\", \"In Group Change\"] && 'OppStage' == \"Change Confirmed\" && 'ProdStage' == \"Sold\" && 'AddorLoseLives' == \"Add Lives\";\nq_F = filter q by 'OppRecordType' == \"Renewal\" && 'OppStage' == \"Customer Termed\" && 'ProdStage' == \"Termed\";\nq_G = filter q by 'OppRecordType' in [\"In Group Add Product\", \"In Group Change\"] && 'OppStage' == \"Change Confirmed\" && 'ProdStage' == \"Lost\" && 'AddorLoseLives' == \"Lose Lives\";\nresult_DEFG = group q_D by 'AccountRegion' full, q_E by 'AccountRegion' full, q_F by 'AccountRegion' full, q_G by 'AccountRegion';\nresult_DEFG = foreach result_DEFG generate coalesce(q_D.'AccountRegion',q_E.'AccountRegion',q_F.'AccountRegion',q_G.'AccountRegion') as 'AccountRegion',sum(q_D.'ProdMembers') as 'D', sum(q_E.'ProdMembers') as 'E', sum(q_F.'ProdMembers') as 'F', sum(q_G.'ProdMembers') as 'G';\nresult_DEFG = foreach result_DEFG generate  \"Renewal\" as 'Toggle', 'AccountRegion' as 'AccountRegion',D+E as {{column(StaticToggle_NBEB_1.selection,[\"header\"]).asObject()}}, F+G as 'Loss';\nresult_x = union result_AB,result_DEFG;\nresult_x = filter result_x by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppRecordType\").asEquality(\"Toggle\")}};","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","start":"[]","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"showHeader":false,"show":true,"customSize":"auto","position":"bottom-center","inside":false},"axisMode":"sync","tooltip":{"showBinLabel":true,"measures":"","showPercentage":true,"showDimensions":true,"showMeasures":true,"customizeTooltip":false,"dimensions":""},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":false,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}},"Top10_Competitor_1":{"broadcastFacet":true,"groups":[],"label":"Top10_Competitor","numbers":[],"query":"q = load \"National_DataSet\";\nq_A = filter q by ('OppRecordType' == \"New Business\") && ('OppStage' == \"Closed Won\" && 'ProdStage' == \"Sold\");\nresult_A = group q_A by 'CompetitorName';\nresult_A = foreach result_A generate \"New Business\" as 'RecordType', \"Win\" as 'WinLoss', \"Top 10 Wins by Competitor\" as 'Header', q_A.'CompetitorName' as 'CompetitorName', sum(q_A.'ProdMembers') as 'A';\nresult_A = filter result_A by 'A' > 0;\nresult_A = order result_A by 'A' desc;\nq_B = filter q by ('OppRecordType' == \"New Business\") && 'OppStage' == \"Closed Lost\" && 'ProdStage' in [\"Lost\", \"Dead\"];\nresult_B = group q_B by 'CompetitorName';\nresult_B = foreach result_B generate \"New Business\" as 'RecordType', \"Loss\" as 'WinLoss', \"Top 10 Losses by Competitor\" as 'Header', q_B.'CompetitorName' as 'CompetitorName', sum(q_B.'ProdMembers') as 'A';\nresult_B = filter result_B by 'A' < 0;\nresult_B = order result_B by 'A' asc;\nq_C = filter q by (('OppRecordType' in [\"Renewal\", \"In Group Change\", \"In Group Add Product\"]) && ('OppStage' in [\"Change Confirmed\", \"Renewal Finalized\"])) && ('ProdStage' in [\"Sold\"]);\nresult_C = group q_C by 'CompetitorName';\nresult_C = foreach result_C generate \"Renewal\" as 'RecordType', \"Win\" as 'WinLoss', \"Top 10 Growth by Competitor\" as 'Header', q_C.'CompetitorName' as 'CompetitorName', sum(q_C.'ProdMembers') as 'A';\nresult_C = filter result_C by 'A' > 0;\nresult_C = order result_C by 'A' desc;\nq_D = filter q by (('OppRecordType' in [\"Renewal\", \"In Group Change\", \"In Group Add Product\"]) && ('OppStage' in [\"Change Confirmed\", \"Renewal Finalized\", \"Customer Termed\"]));\nresult_D = group q_D by 'CompetitorName';\nresult_D = foreach result_D generate \"Renewal\" as 'RecordType', \"Loss\" as 'WinLoss', \"Top 10 Losses by Competitor\" as 'Header', q_D.'CompetitorName' as 'CompetitorName', sum(q_D.'ProdMembers') as 'A';\nresult_D = filter result_D by 'A' < 0; \nresult_D = order result_D by 'A' asc;\nFinal = union result_A, result_B, result_C, result_D;\nFinal_1 = filter Final by {{cell(StaticToggle_NBEB_1.selection,0,\"Filter_OppRecordType\").asEquality(\"RecordType\")}};\nFinal_2 = filter Final_1 by {{column(StaticToggle_NBEB_2.selection,[\"Filter_WinLoss\"]).asEquality(\"WinLoss\")}};\nFinal_2 = limit Final_2 10;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","start":"[]","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"showHeader":true,"show":false,"customSize":"auto","position":"right-top","inside":false},"axisMode":"sync","visualizationType":"hbar","title":{"label":"Top 10 Win/Loss by Competitor","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"enable":false,"type":"x","chartsPerLine":4},"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":false,"showAxis":false,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}}},"type":"chart"}}},"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1},"widgets":{"number_7":{"parameters":{"compact":false,"exploreLink":true,"measureField":"Win Ratio","numberColor":"#335779","numberSize":20,"showActionMenu":true,"step":"Winloss_Member_Widge_1","textAlignment":"center","title":"{{cell(StaticToggle_NBEB_1.selection,0, \"header6\").asString()}}","titleColor":"#335779","titleSize":12},"type":"number"},"container_1":{"parameters":{"alignmentX":"center","alignmentY":"center","fit":"original"},"type":"container"},"container_2":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"container_6":{"parameters":{"alignmentX":"left","alignmentY":"top","fit":"original"},"type":"container"},"chart_6":{"parameters":{"autoFitMode":"keepLabels","totalValue":"computeTotal","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"bottom-center","inside":false},"axisMode":"sync","tooltip":{"showBinLabel":true,"measures":["Win","Loss"],"showNullValues":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"customizeTooltip":false,"dimensions":["Toggle","AccountRegion"]},"visualizationType":"hbar","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"Win Loss Summary","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"totalLabel":"","showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":false,"showAxis":false,"referenceLines":[{"color":"#091A3E","value":{"data":0,"type":"static"}}],"title":"","customDomain":{"showDomain":false}},"theme":"wave","step":"WIN_LOSS_summary_1","dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"Toggle","type":"round"}}},"applyConditionalFormatting":false},"type":"chart"},"chart_2":{"parameters":{"autoFitMode":"keepLabels","totalValue":"computeTotal","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":false,"customSize":"auto","position":"right-top","inside":false},"axisMode":"sync","tooltip":{"showBinLabel":true,"measures":"","showNullValues":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"customizeTooltip":false,"dimensions":""},"visualizationType":"hbar","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"{{cell(Top10_Brokerage_1.result,0,\"Header\").asObject()}}","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"totalLabel":"","showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":false,"showAxis":false,"referenceLines":[{"color":"#091A3E","value":{"data":0,"type":"static"}}],"title":"","customDomain":{"showDomain":false}},"theme":"wave","step":"Top10_Brokerage_1","dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":false},"type":"chart"},"chart_1":{"parameters":{"showValues":true,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"showBinLabel":true,"measures":"","showNullValues":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"customizeTooltip":false,"dimensions":""},"visualizationType":"pie","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"Lost Reasons Distribution","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"centerValueType":"none","valueType":"percent","theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":false,"autoFitMode":"keepLabels","centerText":"","totalValue":"computeTotal","bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"showMeasureTitle":false,"inner":0,"totalLabel":"","showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"step":"Lost_reasons_1"},"type":"chart"},"chart_4":{"parameters":{"autoFitMode":"keepLabels","totalValue":"computeTotal","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":false,"customSize":"auto","position":"right-top","inside":false},"axisMode":"sync","tooltip":{"showBinLabel":true,"measures":"","showNullValues":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"customizeTooltip":false,"dimensions":""},"visualizationType":"hbar","exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"{{cell(Top10_Competitor_1.result,0,\"Header\").asObject()}}","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"totalLabel":"","showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":false,"showAxis":false,"referenceLines":[{"color":"#091A3E","value":{"data":0,"type":"static"}}],"title":"","customDomain":{"showDomain":false}},"theme":"wave","step":"Top10_Competitor_1","dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":false},"type":"chart"},"chart_3":{"parameters":{"autoFitMode":"keepLabels","totalValue":"computeTotal","showValues":true,"showPoints":true,"legend":{"descOrder":false,"showHeader":false,"show":true,"customSize":"auto","position":"top-center","inside":false},"axisMode":"dual","tooltip":{"showBinLabel":true,"measures":"","showNullValues":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"customizeTooltip":false,"dimensions":""},"visualizationType":"combo","missingValue":"connect","showValuesOnLine":false,"exploreLink":true,"title":{"fontSize":14,"subtitleFontSize":11,"label":"Close/Retention Ratio","align":"center","subtitleLabel":""},"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"totalLabel":"","showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":false,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":false,"showAxis":true,"referenceLines":[{"color":"#091A3E","value":{"data":0,"type":"static"}}],"title":"","customDomain":{"showDomain":false}},"theme":"wave","step":"Win_Loss_Close_Ratio_1","dimensionAxis":{"showTitle":false,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":false},"type":"chart"},"listselector_3":{"parameters":{"compact":false,"displayMode":"combo","exploreLink":false,"filterStyle":{"titleColor":"#091A3E","valueColor":"#17324D"},"instant":true,"measureField":"count","showActionMenu":false,"step":"Reason_1","title":"Reason"},"type":"listselector"},"dateselector_1":{"parameters":{"absoluteModeEnabled":true,"calendarTypeSwitchingAllowed":false,"defaultFiscalMode":false,"displayMode":"combo","filterStyle":{"titleColor":"#091A3E","valueColor":"#17324D"},"instant":true,"presetsEnabled":false,"relativeModeEnabled":true,"showActionMenu":true,"step":"OppEffectiveDate_1","title":"Effective Date"},"type":"dateselector"},"listselector_2":{"parameters":{"compact":false,"displayMode":"combo","exploreLink":false,"filterStyle":{"titleColor":"#091A3E","valueColor":"#17324D"},"instant":true,"measureField":"count","showActionMenu":false,"step":"Competitor_1","title":"Competitor"},"type":"listselector"},"listselector_4":{"parameters":{"compact":false,"displayMode":"combo","exploreLink":false,"filterStyle":{"titleColor":"#091A3E","valueColor":"#17324D"},"instant":true,"measureField":"count","showActionMenu":false,"step":"Consulting_firm_1","title":"Brokerage"},"type":"listselector"},"link_3":{"parameters":{"destinationLink":{"name":"Win_Loss_Detail_Report"},"destinationType":"dashboard","fontSize":12,"includeState":true,"text":"Win/Loss Detail","textAlignment":"center","textColor":"#091A3E"},"type":"link"},"link_1":{"parameters":{"destinationLink":{"name":"National_Home_Page1"},"destinationType":"dashboard","fontSize":12,"includeState":false,"text":"Home","textAlignment":"center","textColor":"#091A3E"},"type":"link"},"link_2":{"parameters":{"destinationLink":{"name":"Renewal_Pipeline_by_Region"},"destinationType":"dashboard","fontSize":12,"includeState":false,"text":"Renewal Pipeline by Region","textAlignment":"center","textColor":"#091A3E"},"type":"link"},"globalfilters_1":{"parameters":{"step":"all_1"},"type":"globalfilters"},"number_5":{"parameters":{"compact":true,"exploreLink":true,"measureField":"Total Loss","numberColor":"rgb(236, 0, 0)","numberSize":20,"showActionMenu":true,"step":"Winloss_Member_Widge_1","textAlignment":"center","title":"{{cell(StaticToggle_NBEB_1.selection,0, \"header5\").asString()}}","titleColor":"#091A3E","titleSize":12},"type":"number"},"number_4":{"parameters":{"compact":true,"exploreLink":true,"measureField":"Total Win","numberColor":"#335779","numberSize":20,"showActionMenu":true,"step":"Winloss_Member_Widge_1","textAlignment":"center","title":"{{cell(StaticToggle_NBEB_1.selection,0, \"header4\").asString()}}","titleColor":"#091A3E","titleSize":12},"type":"number"},"number_3":{"parameters":{"compact":true,"exploreLink":true,"measureField":"Win Ratio","numberColor":"#335779","numberSize":20,"showActionMenu":true,"step":"Winloss_Account_Widg_1","textAlignment":"center","title":"{{cell(StaticToggle_NBEB_1.selection,0, \"header3\").asString()}}","titleColor":"#091A3E","titleSize":12},"type":"number"},"number_2":{"parameters":{"compact":false,"exploreLink":true,"measureField":"Loss","numberColor":"rgb(236, 0, 0)","numberSize":20,"showActionMenu":true,"step":"Winloss_Account_Widg_1","textAlignment":"center","title":"{{cell(StaticToggle_NBEB_1.selection,0, \"header2\").asString()}}","titleColor":"#091A3E","titleSize":12},"type":"number"},"number_1":{"parameters":{"compact":true,"exploreLink":true,"measureField":"Win","numberColor":"#335779","numberSize":20,"showActionMenu":true,"step":"Winloss_Account_Widg_1","textAlignment":"center","title":"{{cell(StaticToggle_NBEB_1.selection,0, \"header1\").asString()}}","titleColor":"#091A3E","titleSize":12},"type":"number"},"pillbox_2":{"parameters":{"compact":false,"exploreLink":false,"fontSize":16,"selectedTab":{"backgroundColor":"#677A97","borderEdges":[],"textColor":"#FFFFFF"},"showActionMenu":true,"step":"StaticToggle_NBEB_1","textColor":"#5C7A99"},"type":"pillbox"},"pillbox_1":{"parameters":{"compact":false,"exploreLink":false,"fontSize":16,"selectedTab":{"backgroundColor":"#677A97","borderEdges":[],"textColor":"#FFFFFF"},"showActionMenu":true,"step":"StaticToggle_NBEB_2","textColor":"#5C7A99"},"type":"pillbox"},"listselector_1":{"parameters":{"compact":false,"displayMode":"combo","exploreLink":false,"filterStyle":{"titleColor":"#091A3E","valueColor":"#17324D"},"instant":true,"measureField":"count","showActionMenu":false,"step":"AccountRegion_1","title":"Sales Region"},"type":"listselector"}}}