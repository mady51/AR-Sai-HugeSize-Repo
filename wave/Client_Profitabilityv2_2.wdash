{"dataSourceLinks":[],"filters":[{"dataset":{"name":"National_Client_Underwriting"},"dependent":true,"fields":["UWEffectiveDate"],"label":"UWEffectiveDate","locked":false,"operator":">=","value":"[[1483228800000,null]]"}],"gridLayouts":[{"name":"Default","numColumns":49,"pages":[{"label":"Main","name":"e3f4156b-014f-4f2e-bbd7-207df6895bfc","navigationHidden":false,"widgets":[{"colspan":23,"column":0,"name":"table_2","row":6,"rowspan":16,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1}},{"colspan":25,"column":24,"name":"table_1","row":6,"rowspan":17,"widgetStyle":{"borderEdges":[]}},{"colspan":23,"column":0,"name":"pillbox_1","row":2,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":4,"borderWidth":1}},{"colspan":11,"column":24,"name":"pillbox_2","row":2,"rowspan":3,"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":4,"borderWidth":1}},{"colspan":9,"column":0,"name":"text_2","row":0,"rowspan":2,"widgetStyle":{"borderEdges":[]}},{"colspan":9,"column":24,"name":"text_3","row":0,"rowspan":2,"widgetStyle":{"borderEdges":[]}}]},{"label":"Global","name":"e458c26e-0fb8-4fa9-9a4b-ef63c8648e0c","navigationHidden":false,"widgets":[{"colspan":49,"column":0,"name":"filterpanel_1","row":0,"rowspan":12,"widgetStyle":{"borderEdges":[]}}]}],"rowHeight":"fine","selectors":[],"style":{"alignmentX":"left","alignmentY":"top","backgroundColor":"rgba(255, 255, 255, 0)","cellSpacingX":0,"cellSpacingY":0,"fit":"original","gutterColor":"#A3B8CC"},"version":1.0}],"layouts":[],"steps":{"test_3_1":{"broadcastFacet":true,"groups":[],"label":"test_3","numbers":[],"query":"q = load \"National_Client_Underwriting\";q = filter q by date('UWEffectiveDate_Year', 'UWEffectiveDate_Month', 'UWEffectiveDate_Day') in [dateRange([2017,1,1], [9999,1,1])];\nq_A = filter q by {{cell(YearDefault_Midstep_1.result,0,\"PYear\").asEquality(\"UWEffectiveDate_Year\")}};\nq_B = filter q by {{cell(YearDefault_Midstep_1.result,0,\"Year\").asEquality(\"UWEffectiveDate_Year\")}};\nresult1 = group q_A by 'Type' full, q_B by 'Type';\nresult1 = foreach result1 generate  \"{{cell(YearDefault_Midstep_1.result,0,\"PYear\").asString()}}\" as '% Diff From ', coalesce(q_A.'Type',q_B.'Type') as 'Type',{{column(Type_2.result,[\"value1\"]).asObject()}} ,case when coalesce(sum(q_A.'BilledRatePCPM'),0) == 0 && coalesce(sum(q_A.'TotalOpGainPCPM'),0) == 0  && coalesce(sum(q_A.'ChangeInOpGainPCPM'),0) == 0  && coalesce(sum(q_A.'AnnualRevenue'),0) == 0 && coalesce(sum(q_A.'AnnualOpGain'),0) == 0  && coalesce(sum(q_A.'Contracts'),0) == 0 && coalesce(sum(q_A.'Members'),0) == 0  then 0 else 1 end as 'flag';\nresult1 = filter result1 by 'flag' == 1;\nresult1=foreach result1 generate '% Diff From ', 'Type' as 'Metric Type',{{column(Type_2.result,[\"display1\"]).asObject()}};\nq_C = filter q by {{cell(YearDefault_Midstep_1.result,0,\"PPYear\").asEquality(\"UWEffectiveDate_Year\")}};\nq_D = filter q by {{cell(YearDefault_Midstep_1.result,0,\"Year\").asEquality(\"UWEffectiveDate_Year\")}};\nresult2 = group q_C by 'Type' full, q_D by 'Type';\nresult2 = foreach result2 generate \"{{cell(YearDefault_Midstep_1.result,0,\"PPYear\").asString()}}\"  as '% Diff From ',coalesce(q_C.'Type',q_D.'Type') as 'Type',{{column(Type_2.result,[\"value2\"]).asObject()}},case when coalesce(sum(q_C.'BilledRatePCPM'),0) == 0 && coalesce(sum(q_C.'TotalOpGainPCPM'),0) == 0  && coalesce(sum(q_C.'ChangeInOpGainPCPM'),0) == 0  && coalesce(sum(q_C.'AnnualRevenue'),0) == 0 && coalesce(sum(q_C.'AnnualOpGain'),0) == 0  && coalesce(sum(q_C.'Contracts'),0) == 0 && coalesce(sum(q_C.'Members'),0) == 0  then 0 else 1 end as 'flag';\nresult2 = filter result2 by 'flag' == 1;\nresult2=foreach result2 generate '% Diff From ','Type' as 'Metric Type',{{column(Type_2.result,[\"display1\"]).asObject()}};\nresult= union result1,result2;\nresult =foreach result generate '% Diff From ', 'Metric Type', {{column(Type_2.result,[\"display1\"]).asObject()}};\n--result = foreach result generate '% Diff From ', 'Bill Rate Sold Pct','OG Total Sold Pct','OG Chg Sold Pct','OG Annu Sold Pct','Rev Annu Sold Pct','Contr Sold Pct','Mbrs Sold Pct';\n--result= order result by all;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","start":"[]","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"verticalPadding":8},"type":"table"}},"Year_1_2":{"broadcastFacet":true,"groups":[],"label":"Year_1","numbers":[],"query":"q = load \"National_Client_Underwriting\";\nq = group q by 'AccountName';\nq = foreach q generate 'AccountName' as 'AccountName', count() as 'count';\nq = limit q 2000;","receiveFacetSource":{"mode":"none","steps":[]},"selectMode":"single","start":"[]","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"showBinLabel":true,"measures":"","showNullValues":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"customizeTooltip":false,"dimensions":""},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"YearDefault_Midstep_1":{"broadcastFacet":true,"groups":[],"label":"YearDefault_Midstep","numbers":[],"query":"q = load \"National_Client_Underwriting\";\nq = group q by 'UWEffectiveDate_Year';\nq = foreach q generate 'UWEffectiveDate_Year' as 'Year', string_to_number('UWEffectiveDate_Year') - 1 as 'PYear',  string_to_number('UWEffectiveDate_Year') - 2 as 'PPYear', count() as 'count';\nq = foreach q generate 'Year' as 'Year', number_to_string('PYear',\"####\") as 'PYear',  number_to_string('PPYear',\"####\") as 'PPYear', count as 'count';\nq = order q by 'Year' desc;\nq = limit q 1;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","start":"[]","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"#e0e5ee","borderWidth":1,"cell":{"backgroundColor":"#ffffff","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#f4f6f9","fontColor":"#16325c","fontSize":12},"innerMajorBorderColor":"#a8b7c7","innerMinorBorderColor":"#e0e5ee","maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"showActionMenu":true,"totals":true,"verticalPadding":8},"type":"table"}},"Type_2":{"broadcastFacet":true,"columns":{},"label":"Type","selectMode":"multirequired","start":"{\"display\":[\"Bill Rate\",\"OG Total\",\"OG Chg\",\"OG Annu\",\"Rev Annu\",\"Contr\",\"Mbrs\"]}","type":"staticflex","values":["{\"display\":\"Bill Rate\",\"display1\":\"'Bill Rate Pct'\",\"value\":\"sum(q.'BilledRatePCPM') as 'Bill Rate'\",\"value1\":\"case when coalesce(sum(q_B.'BilledRatePCPM'),0) - coalesce(sum(q_A.'BilledRatePCPM'),0) == sum(q_B.'BilledRatePCPM') then 0 else ((coalesce(sum(q_B.'BilledRatePCPM'),0) - coalesce(sum(q_A.'BilledRatePCPM'),0))/ coalesce(sum(q_A.'BilledRatePCPM'),0))  end as 'Bill Rate Pct'\",\"value2\":\"case when coalesce(sum(q_D.'BilledRatePCPM'),0) - coalesce(sum(q_C.'BilledRatePCPM'),0) == sum(q_D.'BilledRatePCPM') then 0 else ((coalesce(sum(q_D.'BilledRatePCPM'),0) - coalesce(sum(q_C.'BilledRatePCPM'),0))/ coalesce(sum(q_C.'BilledRatePCPM'),0))  end as 'Bill Rate Pct'\"}","{\"display\":\"OG Total\",\"display1\":\"'OG Total Pct'\",\"value\":\"sum(q.'TotalOpGainPCPM') as 'OG Total'\",\"value1\":\"case when coalesce(sum(q_B.'TotalOpGainPCPM'),0) - coalesce(sum(q_A.'TotalOpGainPCPM'),0) == sum(q_B.'TotalOpGainPCPM') then 0 else ((coalesce(sum(q_B.'TotalOpGainPCPM'),0) - coalesce(sum(q_A.'TotalOpGainPCPM'),0))/ coalesce(sum(q_A.'TotalOpGainPCPM'),0))  end as 'OG Total Pct'\",\"value2\":\"case when coalesce(sum(q_D.'TotalOpGainPCPM'),0) - coalesce(sum(q_C.'TotalOpGainPCPM'),0) == sum(q_D.'TotalOpGainPCPM') then 0 else ((coalesce(sum(q_D.'TotalOpGainPCPM'),0) - coalesce(sum(q_C.'TotalOpGainPCPM'),0))/ coalesce(sum(q_C.'TotalOpGainPCPM'),0))  end as 'OG Total Pct'\"}","{\"display\":\"OG Chg\",\"display1\":\"'OG Chg Pct'\",\"value\":\"sum(q.'ChangeInOpGainPCPM') as 'OG Chg'\",\"value1\":\"case when coalesce(sum(q_B.'ChangeInOpGainPCPM'),0) - coalesce(sum(q_A.'ChangeInOpGainPCPM'),0) == sum(q_B.'ChangeInOpGainPCPM') then 0 else ((coalesce(sum(q_B.'ChangeInOpGainPCPM'),0) - coalesce(sum(q_A.'ChangeInOpGainPCPM'),0))/ coalesce(sum(q_A.'ChangeInOpGainPCPM'),0))  end as 'OG Chg Pct'\",\"value2\":\"case when coalesce(sum(q_D.'ChangeInOpGainPCPM'),0) - coalesce(sum(q_C.'ChangeInOpGainPCPM'),0) == sum(q_D.'ChangeInOpGainPCPM') then 0 else ((coalesce(sum(q_D.'ChangeInOpGainPCPM'),0) - coalesce(sum(q_C.'ChangeInOpGainPCPM'),0))/ coalesce(sum(q_C.'ChangeInOpGainPCPM'),0))  end as 'OG Chg Pct'\"}","{\"display\":\"OG Annu\",\"display1\":\"'OG Annu Pct'\",\"value\":\"sum(q.'AnnualOpGain') as 'OG Annu'\",\"value1\":\"case when coalesce(sum(q_B.'AnnualOpGain'),0) - coalesce(sum(q_A.'AnnualOpGain'),0) == sum(q_B.'AnnualOpGain') then 0 else ((coalesce(sum(q_B.'AnnualOpGain'),0) - coalesce(sum(q_A.'AnnualOpGain'),0))/ coalesce(sum(q_A.'AnnualOpGain'),0))  end as 'OG Annu Pct'\",\"value2\":\"case when coalesce(sum(q_D.'AnnualOpGain'),0) - coalesce(sum(q_C.'AnnualOpGain'),0) == sum(q_D.'AnnualOpGain') then 0 else ((coalesce(sum(q_D.'AnnualOpGain'),0) - coalesce(sum(q_C.'AnnualOpGain'),0))/ coalesce(sum(q_C.'AnnualOpGain'),0))  end as 'OG Annu Pct'\"}","{\"display\":\"Rev Annu\",\"display1\":\"'Rev Annu Pct'\",\"value\":\"sum(q.'AnnualRevenue') as 'Rev Annu'\",\"value1\":\"case when coalesce(sum(q_B.'AnnualRevenue'),0) - coalesce(sum(q_A.'AnnualRevenue'),0) == sum(q_B.'AnnualRevenue') then 0 else ((coalesce(sum(q_B.'AnnualRevenue'),0) - coalesce(sum(q_A.'AnnualRevenue'),0))/ coalesce(sum(q_A.'AnnualRevenue'),0))  end as 'Rev Annu Pct'\",\"value2\":\"case when coalesce(sum(q_D.'AnnualRevenue'),0) - coalesce(sum(q_C.'AnnualRevenue'),0) == sum(q_D.'AnnualRevenue') then 0 else ((coalesce(sum(q_D.'AnnualRevenue'),0) - coalesce(sum(q_C.'AnnualRevenue'),0))/ coalesce(sum(q_C.'AnnualRevenue'),0))  end as 'Rev Annu Pct'\"}","{\"display\":\"Contr\",\"display1\":\"'Contr Pct'\",\"value\":\"sum(q.'Contracts') as 'Contr'\",\"value1\":\"case when coalesce(sum(q_B.'Contracts'),0) - coalesce(sum(q_A.'Contracts'),0) == sum(q_B.'Contracts') then 0 else ((coalesce(sum(q_B.'Contracts'),0) - coalesce(sum(q_A.'Contracts'),0))/ coalesce(sum(q_A.'Contracts'),0))  end as 'Contr Pct'\",\"value2\":\"case when coalesce(sum(q_D.'Contracts'),0) - coalesce(sum(q_C.'Contracts'),0) == sum(q_D.'Contracts') then 0 else ((coalesce(sum(q_D.'Contracts'),0) - coalesce(sum(q_C.'Contracts'),0))/ coalesce(sum(q_C.'Contracts'),0))  end as 'Contr Pct'\"}","{\"display\":\"Mbrs\",\"display1\":\"'Mbrs Pct'\",\"value\":\"sum(q.'Members') as 'Mbrs'\",\"value1\":\"case when coalesce(sum(q_B.'Members'),0) - coalesce(sum(q_A.'Members'),0) == sum(q_B.'Members') then 0 else ((coalesce(sum(q_B.'Members'),0) - coalesce(sum(q_A.'Members'),0))/ coalesce(sum(q_A.'Members'),0))  end as 'Mbrs Pct'\",\"value2\":\"case when coalesce(sum(q_D.'Members'),0) - coalesce(sum(q_C.'Members'),0) == sum(q_C.'Members') then 0 else ((coalesce(sum(q_D.'Members'),0) - coalesce(sum(q_C.'Members'),0))/ coalesce(sum(q_C.'Members'),0))  end as 'Mbrs Pct'\"}"]},"UWGroupNumber_2":{"broadcastFacet":true,"groups":[],"label":"UWGroupNumber_2","numbers":[],"query":"q = load \"National_Client_Underwriting\";\nq = filter q by {{cell(Year_1_2.selection,0,\"AccountName\").asEquality(\"AccountName\")}};\nq = group q by 'UWGroupNumber';\nq = foreach q generate 'UWGroupNumber' as 'UWGroupNumber', count() as 'count';\nq = order q by 'UWGroupNumber' asc;\nq = limit q 2000;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"autoFitMode":"keepLabels","showValues":true,"bins":{"breakpoints":{"high":100,"low":0},"bands":{"high":{"color":"#008000","label":""},"low":{"color":"#B22222","label":""},"medium":{"color":"#ffa500","label":""}}},"legend":{"descOrder":false,"showHeader":true,"show":true,"customSize":"auto","position":"right-top","inside":false},"axisMode":"multi","tooltip":{"showBinLabel":true,"measures":"","showNullValues":true,"showPercentage":true,"showDimensions":true,"showMeasures":true,"customizeTooltip":false,"dimensions":""},"visualizationType":"hbar","title":{"fontSize":14,"subtitleFontSize":11,"label":"","align":"center","subtitleLabel":""},"binValues":false,"trellis":{"flipLabels":false,"showGridLines":true,"size":[100,100],"enable":false,"type":"x","chartsPerLine":4},"showActionMenu":true,"measureAxis2":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"measureAxis1":{"sqrtScale":false,"showTitle":true,"showAxis":true,"title":"","customDomain":{"showDomain":false}},"theme":"wave","dimensionAxis":{"showTitle":true,"customSize":"auto","showAxis":true,"title":"","icons":{"useIcons":false,"iconProps":{"fit":"cover","column":"","type":"round"}}},"applyConditionalFormatting":true},"type":"chart"}},"Test_2":{"broadcastFacet":true,"groups":[],"label":"Test","numbers":[],"query":"q = load \"National_Client_Underwriting\";\nq = filter q by {{column(YearDefault_Midstep_1.result, [\"Year\"]).asEquality(\"UWEffectiveDate_Year\")}};\nresult = group q by ('UWEffectiveDate_Year','Type');\nresult = foreach result generate q.'UWEffectiveDate_Year' as 'Effective Year','Type' as 'Metric Type', {{column(Type_2.selection,[\"value\"]).asObject()}};\nresult = order result by ( 'Effective Year' desc);\nresult = limit result 2000;","receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"single","start":"[]","strings":[],"type":"saql","useGlobal":true,"visualizationParameters":{"parameters":{"borderColor":"rgb(168, 183, 199)","borderWidth":1,"cell":{"backgroundColor":"rgb(197, 211, 224)","fontColor":"#091A3E","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"header":{"backgroundColor":"#091A3E","fontColor":"#FFFFFF","fontSize":12},"innerMajorBorderColor":"rgb(84, 105, 141)","innerMinorBorderColor":"rgb(168, 183, 199)","maxColumnWidth":300,"minColumnWidth":40,"mode":"variable","numberOfLines":1,"pivoted":false,"showActionMenu":true,"totals":true,"verticalPadding":8},"type":"table"}},"Type_3":{"broadcastFacet":true,"datasets":[{"name":"National_Client_Underwriting"}],"isGlobal":false,"query":{"query":"{\"measures\":[[\"count\",\"*\"]],\"groups\":[\"Type\"]}","version":-1.0},"receiveFacetSource":{"mode":"all","steps":[]},"selectMode":"multi","type":"aggregateflex","useGlobal":true,"visualizationParameters":{}}},"widgetStyle":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderEdges":[],"borderRadius":0,"borderWidth":1},"widgets":{"table_1":{"parameters":{"borderColor":"rgb(168, 183, 199)","borderWidth":1,"cell":{"backgroundColor":"rgb(197, 211, 224)","fontColor":"#16325c","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"evenRowColor":"#f4f6f9","exploreLink":true,"header":{"backgroundColor":"#091A3E","fontColor":"#FFFFFF","fontSize":12},"innerMajorBorderColor":"rgb(84, 105, 141)","innerMinorBorderColor":"rgb(168, 183, 199)","mode":"fittocontainer","numberOfLines":1,"oddRowColor":"rgb(197, 211, 224)","pivoted":false,"showActionMenu":true,"showRowIndexColumn":false,"step":"test_3_1","verticalPadding":4},"type":"table"},"table_2":{"parameters":{"borderColor":"rgb(168, 183, 199)","borderWidth":1,"cell":{"backgroundColor":"#FFFFFF","fontColor":"#091A3E","fontSize":12},"columnProperties":{},"columns":[],"customBulkActions":[],"evenRowColor":"#f4f6f9","exploreLink":true,"header":{"backgroundColor":"#091A3E","fontColor":"#FFFFFF","fontSize":12},"innerMajorBorderColor":"rgb(84, 105, 141)","innerMinorBorderColor":"rgb(168, 183, 199)","mode":"fittocontainer","numberOfLines":1,"oddRowColor":"rgb(197, 211, 224)","pivoted":false,"showActionMenu":true,"step":"Test_2","totals":true,"verticalPadding":4},"type":"table"},"pillbox_2":{"parameters":{"compact":false,"exploreLink":false,"fontSize":12,"measureField":"count","selectedTab":{"backgroundColor":"#7D98B3","borderColor":"#C6D3E1","borderEdges":["all"],"borderWidth":1,"textColor":"#C6D3E1"},"showActionMenu":false,"step":"Type_3","textColor":"#7D98B3"},"type":"pillbox"},"pillbox_1":{"parameters":{"compact":false,"exploreLink":false,"fontSize":12,"measureField":"count","selectedTab":{"backgroundColor":"#7D98B3","borderColor":"#C6D3E1","borderEdges":["all"],"borderWidth":1,"textColor":"#091A3E"},"showActionMenu":false,"step":"UWGroupNumber_2","textColor":"#7D98B3"},"type":"pillbox"},"text_3":{"parameters":{"content":{"displayTemplate":"Metric Type"},"fontSize":12,"showActionMenu":true,"textAlignment":"left","textColor":"#091A3E"},"type":"text"},"text_2":{"parameters":{"content":{"displayTemplate":"Group"},"fontSize":12,"showActionMenu":true,"textAlignment":"left","textColor":"#091A3E"},"type":"text"},"filterpanel_1":{"parameters":{"filterItemOptions":{"backgroundColor":"#FFFFFF","borderColor":"#E6ECF2","borderRadius":4,"borderWidth":1,"propertyColor":"#54698D","valueColor":"#16325C"},"filters":[],"itemsPerRow":6,"showAllFilters":true,"title":{"separatorColor":"#E6ECF2","text":{"align":"left","color":"#091A3E","fontSize":16,"label":"Filters"},"visible":true}},"type":"filterpanel"}}}